<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Project ENIGMA</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'IBM Plex Mono', monospace;
      background: #0c0c0c url('https://images.unsplash.com/photo-1448375240586-882707db888b?auto=format&fit=crop&w=1470&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #e0e0e0;
      overflow-x: hidden;
    }

    header {
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 80px 20px 60px;
      text-align: center;
      position: relative;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    header h1 {
      font-size: 3em;
      letter-spacing: 2px;
      text-shadow: 0 0 8px rgba(255,255,255,0.1);
    }

    header p {
      margin-top: 10px;
      font-size: 1.2em;
      color: #aaa;
    }

    main {
      padding: 40px 20px;
      max-width: 900px;
      margin: 40px auto;
      background: rgba(255, 255, 255, 0.06);
      border-radius: 16px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.6), inset 0 0 1px rgba(255, 255, 255, 0.3);
      transition: transform 0.4s ease, background 0.4s ease, box-shadow 0.4s ease;
    }

    main:hover {
      background: rgba(255, 255, 255, 0.12);
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.7), inset 0 0 1px rgba(255, 255, 255, 0.3);
    }

    main h1 {
      font-size: 2em;
      margin-bottom: 15px;
      color: #ffd54f;
      text-align: center;
    }

    main p {
      line-height: 1.7;
      font-size: 1.05em;
      text-align: justify;
    }

    #spiral-section {
      position: relative;
      height: 950px;
      background: inherit;
      overflow: hidden;
    }

    #spiral-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: block;
    }

    footer {
      text-align: center;
      background: #111;
      color: #aaa;
      padding: 15px;
      font-size: 0.95em;
    }
  </style>
</head>
<body>

  <header>
    <h1>Project ENIGMA</h1>
    <p>A journey through cryptographic engineering</p>
  </header>

  <main>
    <h1>Project Overview</h1>
    <p>
      This project is a tribute to the legendary Enigma machineâ€”reimagined as an interactive experience that blends history, embedded systems, and creative interface design. Explore multiple modules, from simulated cipher machines to interactive encryption puzzles, and engage with the art and science of codebreaking.
    </p>
  </main>

  <section id="spiral-section">
    <canvas id="spiral-canvas"></canvas>
  </section>

  <footer>
    <p>&copy; 2025 Enigma Project | Created by [..]</p>
  </footer>

  <!-- Three.js animation script -->
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.152.2/build/three.module.js';

    const canvas = document.getElementById('spiral-canvas');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.outputColorSpace = THREE.SRGBColorSpace;

    const scene = new THREE.Scene();
    scene.background = null;

    const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 10);

    scene.add(new THREE.AmbientLight(0xffffff, 0.5));
    const pointLight = new THREE.PointLight(0xffffff, 1.2, 50);
    pointLight.position.set(5, 5, 5);
    scene.add(pointLight);

    const woodTex = new THREE.TextureLoader().load("images/wood-texture.jpg");
    woodTex.colorSpace = THREE.SRGBColorSpace;

    function createEngravedLabelTexture(text) {
      const canvas = document.createElement('canvas');
      canvas.width = 512;
      canvas.height = 256;
      const ctx = canvas.getContext('2d');

      const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
      gradient.addColorStop(0, '#8B4513');
      gradient.addColorStop(0.5, '#A0522D');
      gradient.addColorStop(1, '#8B4513');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = 'rgba(255,255,255,0.95)';
      ctx.font = 'bold 40px Courier New';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(text, canvas.width / 2, canvas.height / 2);

      const tex = new THREE.CanvasTexture(canvas);
      tex.colorSpace = THREE.SRGBColorSpace;
      return tex;
    }

    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const clickable = [];
    let scrollPct = 0;

    const spiralSection = document.getElementById('spiral-section');
    window.addEventListener('scroll', () => {
      const rect = spiralSection.getBoundingClientRect();
      const viewHeight = window.innerHeight;
      const sectionHeight = spiralSection.offsetHeight;
      const visibleTop = Math.max(0, -rect.top);
      scrollPct = Math.min(1, visibleTop / (sectionHeight - viewHeight));
    });

    window.addEventListener('mousemove', e => {
      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
    });

    window.addEventListener('click', () => {
      raycaster.setFromCamera(mouse, camera);
      const hits = raycaster.intersectObjects(clickable, true);
      if (hits.length) {
        let g = hits[0].object;
        while (!clickable.includes(g)) g = g.parent;
        g.scale.set(1.3, 1.3, 1.3);
        setTimeout(() => window.location.href = g.userData.link, 200);
      }
    });

    const customLabels = [
      { label: 'Introduction', link: 'introduction.html' },
      { label: 'Design', link: 'design.html' },
      { label: 'Hardware Design', link: 'hardware.html' },
      { label: 'Software Design', link: 'software.html' },
      { label: 'Result', link: 'result.html' },
      { label: 'Conclusion', link: 'conclusion.html' },
      { label: 'Appendix', link: 'appendix.html' },
      { label: 'Team', link: 'team.html' }
    ];

    const count = customLabels.length;
    const radius = 2.2;
    const gap = 1.2;
    const angleStep = Math.PI * 2 / count;

    (async () => {
      for (let i = 0; i < count; i++) {
        const labelText = customLabels[i].label;
        const labelTex = createEngravedLabelTexture(labelText);

        const group = new THREE.Group();
        const sideMat = new THREE.MeshStandardMaterial({ map: woodTex, metalness: 0.2, roughness: 0.8 });
        const labelMat = new THREE.MeshStandardMaterial({ map: labelTex, metalness: 0.2, roughness: 0.8 });

        const box = new THREE.Mesh(
          new THREE.BoxGeometry(1.2, 0.8, 0.3),
          [sideMat, sideMat, sideMat, sideMat, labelMat, sideMat]
        );
        group.add(box);

        const ang = i * angleStep;
        const y = -i * gap + 0.5;
        group.position.set(Math.sin(ang) * radius, y, Math.cos(ang) * radius);
        group.lookAt(0, y, 0);
        group.rotateY(Math.PI);

        group.userData.link = customLabels[i].link;
        scene.add(group);
        clickable.push(group);
      }
    })();

    function animate() {
      pointLight.intensity = 0.6 + Math.sin(Date.now() * 0.002) * 0.3;
      const ang = scrollPct * Math.PI * 2;
      const y = -scrollPct * count * gap;
      camera.position.set(Math.sin(ang) * (radius + 3), y, Math.cos(ang) * (radius + 3));
      camera.lookAt(0, y, 0);

      raycaster.setFromCamera(mouse, camera);
      const hits = raycaster.intersectObjects(clickable, true);

      clickable.forEach(g => {
        g.scale.set(1, 1, 1);
        g.children[0].material.emissiveIntensity = 0.8;
      });

      if (hits.length) {
        let g = hits[0].object;
        while (!clickable.includes(g)) g = g.parent;
        g.scale.set(1.15, 1.15, 1.15);
        g.children[0].material.emissiveIntensity = 1.8;
      }

      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
